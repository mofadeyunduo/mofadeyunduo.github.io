## 原子性

原子性有两种实现方式：

- watch + multi + exec，传统三件套
- eval 执行 lua 脚本

具体用法请参见官方文档。

| 方式 | 优点 | 缺点 |
| --- | --- | --- |
| 传统三件套 | 以命令形式使用，相对原生 | 概念相对复杂；在业务代码中，事务代码侵入，可读性降低 |
| lua 脚本 | 简单方便；非侵入业务代码，可读性高 | 需要熟悉 lua 语言 |

> 官方推荐使用 lua 脚本。